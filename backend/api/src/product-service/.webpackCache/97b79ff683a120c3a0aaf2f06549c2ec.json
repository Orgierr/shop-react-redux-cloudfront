{"remainingRequest":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\node_modules\\babel-loader\\lib\\index.js!E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\src\\handlers\\getProductsById.ts","dependencies":[{"path":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\src\\handlers\\getProductsById.ts","mtime":1655991539247},{"path":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\.babelrc","mtime":1654515707493},{"path":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654516721404},{"path":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\node_modules\\babel-loader\\lib\\index.js","mtime":1654516733003}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tICd1dWlkJzsKaW1wb3J0IHsgU2VydmljZUVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL1NlcnZpY2VFcnJvcic7CmltcG9ydCB7IFN0YXR1c0NvZGVzIH0gZnJvbSAnaHR0cC1zdGF0dXMtY29kZXMnOwppbXBvcnQgeyBQcm9kdWN0UmVwb3NpdG9yeSB9IGZyb20gJy4uL3JlcG9zaXRvcnkvcHJvZHVjdFJlcG9zaXRveSc7CmV4cG9ydCBjb25zdCBnZXRQcm9kdWN0c0J5SWQgPSBhc3luYyBldmVudCA9PiB7CiAgY29uc29sZS5sb2coZXZlbnQpOwogIGNvbnN0IHByb2R1Y3RQYXRoID0gZXZlbnQucGF0aDsKCiAgdHJ5IHsKICAgIGlmICghdmFsaWRhdGUocHJvZHVjdFBhdGgucHJvZHVjdElkKSkgdGhyb3cgbmV3IFNlcnZpY2VFcnJvcih7CiAgICAgIHN0YXR1c0NvZGU6IFN0YXR1c0NvZGVzLkJBRF9SRVFVRVNULAogICAgICBib2R5OiAnUHJvZHVjdCBpZCBpcyBpbnZhbGlkJwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBzdGF0dXNDb2RlOiBTdGF0dXNDb2Rlcy5PSywKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXdhaXQgUHJvZHVjdFJlcG9zaXRvcnkuZmluZEJ5SWQocHJvZHVjdFBhdGgucHJvZHVjdElkKSkKICAgIH07CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJldHVybiBTZXJ2aWNlRXJyb3IuZXJyb3JSZXNwb25zZShlcnJvcik7CiAgfQp9Ow=="},{"version":3,"names":["validate","ServiceError","StatusCodes","ProductRepository","getProductsById","event","console","log","productPath","path","productId","statusCode","BAD_REQUEST","body","OK","JSON","stringify","findById","error","errorResponse"],"sources":["E:/work/rs-school/js-nodejs-aws/shop-react-redux-cloudfront/backend/api/src/product-service/src/handlers/getProductsById.ts"],"sourcesContent":["import { validate } from 'uuid';\nimport { APIGatewayEvent } from 'aws-lambda';\nimport { ServiceError } from '../errors/ServiceError';\nimport { StatusCodes } from 'http-status-codes';\nimport { ProductRepository } from '../repository/productRepositoy';\nexport const getProductsById = async (\n  event?: APIGatewayEvent & ProductPath,\n) => {\n  console.log(event);\n  const productPath = event.path as unknown as ProductPath;\n  try {\n    if (!validate(productPath.productId))\n      throw new ServiceError({\n        statusCode: StatusCodes.BAD_REQUEST,\n        body: 'Product id is invalid',\n      });\n\n    return {\n      statusCode: StatusCodes.OK,\n      body: JSON.stringify(\n        await ProductRepository.findById(productPath.productId),\n      ),\n    };\n  } catch (error) {\n    return ServiceError.errorResponse(error);\n  }\n};\n"],"mappings":"AAAA,SAASA,QAAT,QAAyB,MAAzB;AAEA,SAASC,YAAT,QAA6B,wBAA7B;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,OAAO,MAAMC,eAAe,GAAG,MAC7BC,KAD6B,IAE1B;EACHC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACA,MAAMG,WAAW,GAAGH,KAAK,CAACI,IAA1B;;EACA,IAAI;IACF,IAAI,CAACT,QAAQ,CAACQ,WAAW,CAACE,SAAb,CAAb,EACE,MAAM,IAAIT,YAAJ,CAAiB;MACrBU,UAAU,EAAET,WAAW,CAACU,WADH;MAErBC,IAAI,EAAE;IAFe,CAAjB,CAAN;IAKF,OAAO;MACLF,UAAU,EAAET,WAAW,CAACY,EADnB;MAELD,IAAI,EAAEE,IAAI,CAACC,SAAL,CACJ,MAAMb,iBAAiB,CAACc,QAAlB,CAA2BT,WAAW,CAACE,SAAvC,CADF;IAFD,CAAP;EAMD,CAbD,CAaE,OAAOQ,KAAP,EAAc;IACd,OAAOjB,YAAY,CAACkB,aAAb,CAA2BD,KAA3B,CAAP;EACD;AACF,CArBM"}]}