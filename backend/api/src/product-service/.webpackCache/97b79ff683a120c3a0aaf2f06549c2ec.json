{"remainingRequest":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\node_modules\\babel-loader\\lib\\index.js!E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\src\\handlers\\getProductsById.ts","dependencies":[{"path":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\src\\handlers\\getProductsById.ts","mtime":1654959768481},{"path":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\.babelrc","mtime":1654515707493},{"path":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654516721404},{"path":"E:\\work\\rs-school\\js-nodejs-aws\\shop-react-redux-cloudfront\\backend\\api\\src\\product-service\\node_modules\\babel-loader\\lib\\index.js","mtime":1654516733003}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgUHJvZHVjdE5vdEZvdW5kRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvbm90X2ZvdW5kX3Byb2R1Y3RfZXJyb3InOwppbXBvcnQgeyBwcm9kdWN0cyB9IGZyb20gJy4uL2NvbW1vbi9wcm9kdWN0cyc7CmltcG9ydCB7IEludGVybmFsU2VydmVyRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW50ZXJuYWxfc2VydmVyX2Vycm9yJzsKaW1wb3J0IHsgUHJvZHVjdFNlcnZpY2UgfSBmcm9tICcuLi9kYi9kYic7CmV4cG9ydCBjb25zdCBnZXRQcm9kdWN0c0J5SWQgPSBhc3luYyBldmVudCA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0U2VydmljZS5maW5kQnlJZChwcm9kdWN0cywgZXZlbnQucGF0aC5wcm9kdWN0SWQpOwogICAgaWYgKCFwcm9kdWN0KSB0aHJvdyBuZXcgUHJvZHVjdE5vdEZvdW5kRXJyb3IoKTsKICAgIHJldHVybiB7CiAgICAgIHN0YXR1c0NvZGU6IDIwMCwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocHJvZHVjdCkKICAgIH07CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByb2R1Y3ROb3RGb3VuZEVycm9yKSByZXR1cm4gZXJyb3IuZXJyb3JSZXM7CiAgICByZXR1cm4gbmV3IEludGVybmFsU2VydmVyRXJyb3IoKS5lcnJvclJlczsKICB9Cn07"},{"version":3,"names":["ProductNotFoundError","products","InternalServerError","ProductService","getProductsById","event","product","findById","path","productId","statusCode","body","JSON","stringify","error","errorRes"],"sources":["E:/work/rs-school/js-nodejs-aws/shop-react-redux-cloudfront/backend/api/src/product-service/src/handlers/getProductsById.ts"],"sourcesContent":["import { ProductNotFoundError } from '../errors/not_found_product_error';\nimport { products } from '../common/products';\nimport { InternalServerError } from '../errors/internal_server_error';\nimport { ProductService } from '../db/db';\n\nexport const getProductsById = async (event: ProductPath) => {\n  try {\n    const product = await ProductService.findById(\n      products,\n      event.path.productId,\n    );\n    if (!product) throw new ProductNotFoundError();\n    return {\n      statusCode: 200,\n      body: JSON.stringify(product),\n    };\n  } catch (error) {\n    if (error instanceof ProductNotFoundError) return error.errorRes;\n    return new InternalServerError().errorRes;\n  }\n};\n"],"mappings":"AAAA,SAASA,oBAAT,QAAqC,mCAArC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,mBAAT,QAAoC,iCAApC;AACA,SAASC,cAAT,QAA+B,UAA/B;AAEA,OAAO,MAAMC,eAAe,GAAG,MAAOC,KAAP,IAA8B;EAC3D,IAAI;IACF,MAAMC,OAAO,GAAG,MAAMH,cAAc,CAACI,QAAf,CACpBN,QADoB,EAEpBI,KAAK,CAACG,IAAN,CAAWC,SAFS,CAAtB;IAIA,IAAI,CAACH,OAAL,EAAc,MAAM,IAAIN,oBAAJ,EAAN;IACd,OAAO;MACLU,UAAU,EAAE,GADP;MAELC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,OAAf;IAFD,CAAP;EAID,CAVD,CAUE,OAAOQ,KAAP,EAAc;IACd,IAAIA,KAAK,YAAYd,oBAArB,EAA2C,OAAOc,KAAK,CAACC,QAAb;IAC3C,OAAO,IAAIb,mBAAJ,GAA0Ba,QAAjC;EACD;AACF,CAfM"}]}